/*
 * Copyright 2014-2021 Univention GmbH
 *
 * https://www.univention.de/
 *
 * All rights reserved.
 *
 * The source code of this program is made available
 * under the terms of the GNU Affero General Public License version 3
 * (GNU AGPL V3) as published by the Free Software Foundation.
 *
 * Binary versions of this program provided by Univention to you as
 * well as other copyrighted, protected or trademarked materials like
 * Logos, graphics, fonts, specific documentations and configurations,
 * cryptographic keys etc. are subject to a license agreement between
 * you and Univention and not subject to the GNU AGPL V3.
 *
 * In the case you use this program under the terms of the GNU AGPL V3,
 * the program is provided in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public
 * License with the Debian GNU/Linux or Univention distribution in file
 * /usr/share/common-licenses/AGPL-3; if not, see
 * <https://www.gnu.org/licenses/>.
 */

column-count(count)
	column-count: count
	-webkit-column-count: count
	-moz-column-count: count

$app-detailspane-background-color = var(--color-grey0)

.appStatusIcon
	background-image: url("appcenter/statusIcons.svg")
	position: absolute
	left: 3.5rem
	bottom: 4.2rem
	width: 40px
	height: 40px
	filter: drop-shadow(4px 4px 3px rgba(0,0,0,0.5))

	&.appUpdateIcon
		left: 4.2rem
		background-position: 0 0

	&.appEndOfLifeIcon
		left: 4.2rem
		background-position: -80px 0

	&.appRecommendedAppIcon
		background-position: -160px 0

	&.appPopularAppIcon
		background-position: -240px 0

	&.appRecommendedAndPopularAppIcon
		background-position: -280px 0

	&.appVoteForApp
		background-position: -200px 0

	&.appUpdatePermissionsIcon
		left: 4.2rem
		background-position: -320px 0

.AppDetailsDialog__warning
	border-radius: var(--border-radius-container)
	display: flex
	align-items: center
	padding: 8px
	margin-bottom: 16px

	&:before
		content: ''
		display: inline-block
		flex: 0 0 auto
		background-size: contain
		width: 20px
		height: 20px
		margin-right: 8px

	.dijitButton
		margin: 16px 0 8px 8px

.AppDetailsDialog__warning--hard
	background-color: rgba(219, 6, 46, 0.3)

	&:before
		background-image: url(../../js/dijit/themes/umc/form/images/error.svg)

.AppDetailsDialog__warning--soft
	background-color: rgba(250, 200, 0, 0.3)

	&:before
		background-image: url(appcenter/icons/warning.svg)

.umcAppDetailsPage
	.umcAppButton
		float: right

	.umcAppButton.umcAppButtonFirstRow
		margin-bottom: 15px

	.umcAppButton.umcAppButtonFirstRow + .umcAppButton:not(.umcAppButtonFirstRow)
		clear: left

	.umcAppButton.umcActionButton
		float: none

	.umcAppSidebarButton
		width: 100%

.categoryButton, .categorySpan
	background-color: transparent
	border: 0
	border-right: 1px solid lightgrey
	padding: 0 0.4em 0 0
	margin-right: 0.4em

	&:first-child
		padding-left: 0

	&:last-child
		border-right: 0

.categoryButton
	text-decoration: underline
	opacity: 0.66

	&:hover
		opacity: 1

.umcGalleryButton
	margin-top: 1em
	padding-bottom: 1em
	border-bottom: 1px solid #b4b4b4

	&:last-child
		border-bottom: 0

.umc .dijitTitlePane.appDetailsPane
	.dijitTitlePaneTitle
		color: #a9a9a9
		border-top: 0
		padding: 0.5em 0 0.5em 0

		.dijitTitlePaneTextNode
			vertical-align: middle

		.dijitArrowNode
			opacity: 0.66

	.dijitTitlePaneTitleClosed .dijitArrowNode
		background-position: -80px 0

	.dijitTitlePaneTitleClosed.dijitTitlePaneTitleHover .dijitArrowNode
		background-position: -100px 0
		opacity: 0.66

	.dijitTitlePaneTitleOpen .dijitArrowNode
		background-position: 0px 0

	.dijitTitlePaneTitleOpen.dijitTitlePaneTitleHover .dijitArrowNode
		background-position: -20px 0
		opacity: 0.66

.umcAppMoreInfo
	table
		border-spacing: 1em 0.1em

.umcTiles
	background-color: var(--bgc-content-container)
	border-radius: var(--border-radius-container)
	margin-bottom: 2em

	h2
		padding: 1em
		border-bottom: thin solid var(--font-color-contrast-low)

	.collection
		display: grid
		grid-template-columns: repeat(auto-fill, 6rem)
		grid-gap: calc(5 * var(--layout-spacing-unit))
		padding: 1em

.umcTile
	width: 6rem
	cursor: pointer

.umcAppInfo
	.umcTile
		cursor: default

	.description
		margin: 2em 0
		font-size: var(--font-size-small)
		text-align: center

	.buttonWrapper
		width: 100%

.umcManageInstallationButton
	display: block
	margin-bottom: 1em

.umcTile, .umcAppInfo
	display: flex
	flex-direction: column
	align-items: center
	border-radius: calc(2 * var(--border-radius-container))

	.tile__box
		position: relative
		border-radius: calc(2 * var(--border-radius-container))
		display: flex
		align-items: center
		justify-content: center
		background: var(--color-grey40)
		width: 6rem
		height: 6rem
		margin-bottom: var(--layout-spacing-unit)

		.tile__logo
			width: 80%

	.tile__name
		overflow: hidden
		text-overflow: ellipsis
		font-size: var(--font-size-small)
		text-align: center

.appcenterMetaCategory
	background-color: var(--bgc-content-container)
	border-radius: var(--border-radius-container)

	margin-bottom: 5em
	padding: 0.5em

	.umcText
		font-size: var(--font-size-normal)
		font-weight: 600
		padding-top: 0.4em
		padding-bottom: 1em
		padding-left: 1em

	.dijitButton
		float: right

.appDetailsPageActions
	margin-bottom: 3em

.umc .umcAppCenterDialog,
.umc .umcAppCenterInstallDialog
	.umcPageHelpText
		font-size: var(--font-size-normal)

	.umcText
		font-size: var(--font-size-small)

	.umcPageNav
		margin-bottom: 0

	.umcAppMoreTitlePane
		font-size: var(--font-size-small)

		.dijitTitlePaneTitle
			font-weight: normal
			text-decoration: underline
			border: none
			font-size: var(--font-size-normal)
			padding: 0.5em 0 0.5em 8px

		svg
			display: none

.umcAppChooseHostWizard
	border-radius: var(--border-radius-container)

.umc .umcAppCenterDialog
	.dijitDefaultButton
		float: right

.umc .umcModule .umcAppCenterInstallWizard
	margin: 7px 0 !important
	background-color: var(--color-grey0)
	border-radius: var(--border-radius-container)

.umcAppCenterInstallDialog
	.umcPageHelpText
		font-weight: bold
		margin-bottom: 0.5em

.umc .umcAppDetailsPage
	&__content
		padding: 0

	.umcPageNav
		.icon
			margin-bottom: 1em
			width: 100%
			max-width: 550px
			height: 120px
			display: inline-block
			background-position: left center
			background-size: contain
			/* border instead of padding works with background-size:contain */
			border-right: solid transparent 20px

		.navContainer
			display: inline-block
			width: 100%
			border-top: 1px solid #c8c8c8
			padding: 0.8em 0

			.umcText
				margin-bottom: 0.3em
				color: #787878
			.umcAppStatusText, .umcContainerWidget
				display: block
				width: 100%
				@media screen and (min-width: 550px)
					display: inline-block
					width: 50%
			.umcAppStatusText
				vertical-align: top

			.umcEndOfLifeHelp
				display: inline-block
				position: relative
				left: 10px
				top: 1px

	.umcAppRatingIcon
		display: inline-block
		margin-right: 1em
		height: 3em
		width: 3em
		border-radius: var(--border-radius-container)

		svg
			width: 100%
			height: 100%
			padding: 20%
			fill: currentColor

	.umcAppRatingVendorSupported
		background-color: #93608b

	.umcAppRatingPopularityAward
		background-color: #f6aa42

	.umcAppRatingRecommendedApp
		background-color: #dd042d

	.umcAppRatingHelp
		display: inline-block
		position: relative

	h1
		margin-bottom: 0.3em

	.mainHeader
		display: block
		font-size: 20px
		font-weight: 500
		margin-bottom: 24px

		svg
			position: relative
			top: 0.2ex
		span
			padding-left: 0.5em
			vertical-align: text-bottom

	.iconHeaderOpen
		background: transparent url("appcenter/icons/open.svg") repeat scroll
		background-size: contain
		background-repeat: no-repeat
		line-height: 1.4em
		padding-left: 1.7em

	.iconHeaderDownload
		background: transparent url("appcenter/icons/download.svg") repeat scroll
		background-size: contain
		background-repeat: no-repeat
		line-height: 1.4em
		padding-left: 1.7em

	.iconHeaderVote
		background: transparent url("appcenter/icons/vote.svg") repeat scroll
		background-size: contain
		background-repeat: no-repeat
		line-height: 1.4em
		padding-left: 1.7em

	.iconHeaderBuy
		background: transparent url("appcenter/icons/shopping_cart.svg") repeat scroll
		background-size: contain
		background-repeat: no-repeat
		line-height: 1.4em
		padding-left: 1.7em

	.iconHeaderInfo
		background: transparent url("appcenter/icons/info.svg") repeat scroll
		background-size: contain
		background-repeat: no-repeat
		line-height: 1.4em
		padding-left: 1.7em

	.iconHeaderBadges
		background: transparent url("appcenter/icons/shopping_bag.svg") repeat scroll
		background-size: contain
		background-repeat: no-repeat
		line-height: 1.4em
		padding-left: 1.7em

	.usage
		margin-bottom: 3em

	.carouselWrapper
		border-top: 1px solid #c8c8c8
		padding: 3em 0 1em 0

	.descriptionContainer
		background-color: var(--bgc-content-container)
		border-radius: var(--border-radius-container)
		font-size: var(--font-size-small)
		padding: 40px
		margin-bottom: 3em

		h1, h2, h3
			margin-bottom: 0.7rem

			&:not(:first-child)
				margin-top: 1.4rem
				padding-top: 1.4rem
				border-top: thin solid var(--color-grey8)
		ul, ol
			margin-bottom: 0.7rem
			padding-left: 15px

			li::marker
				color: var(--color-grey40)


	.appDetailsPane
		margin: 0 -1000px
		padding: 1.5em 1000px


	.appDetailsSidebarElement
		background-color: var(--bgc-content-container)
		border-radius: var(--border-radius-container)
		font-size: var(--font-size-small)
		margin-bottom: 30px
		padding: 1.7em
		color: var(--font-color-contrast-high)

		table
			td:first-child
				vertical-align: top
				color: var(--font-color-contrast-middle)
				padding-right: 12px

.AppLiveSearchSidebarDropDown
	.dijitMenuSeparatorIconCell, .dijitMenuSeparatorLabelCell
		padding: 3px 0

.umc
	.umcAppCenter .umcPageNav,
	.umcAppDetailsPage .umcPageNav
		margin-bottom: 1.5em

	.umcAppDetailsPage
		.umcPageMain
			margin-bottom: 2.25em
		.umcPageFooter
			margin-bottom: 7em
		@media (max-width 768px) 
			.umcPageFooter
				margin-bottom: 5em


	.umcAppCenter .appcenterMetaCategory
		.dijitButton.hiddenButton
			visibility: hidden

		.umcAppCenterGallery
			/*height: 175px;*/
			height: auto

	.umcAppCenter .appLiveSearchSidebar
		border-radius: var(--border-radius-container)

		.umcSearchBox
			margin-bottom: 40px

		.appLiveSearchSidebarElement
			border-top-left-radius: var(--border-radius-container)
			border-top-right-radius: var(--border-radius-container)
			background-color: var(--bgc-content-container)
			padding: 10px

			.umcLayoutRow
				margin-bottom: 0.5em

		.appLiveSearchSidebarElement + .appLiveSearchSidebarElement
			border-radius: 0
			border-top: thin solid var(--font-color-contrast-low)

		.appLiveSearchSidebarElement:last-child
			border-bottom-left-radius: var(--border-radius-container)
			border-bottom-right-radius: var(--border-radius-container)

		.mainHeader
			display: block
			font-size: var(--font-size-small)
			font-weight: 600
			margin-bottom: 20px

		.searchFilterSingle
			font-size: 17px
			font-weight: 500

		.umcLabelPane
			display: flex
			padding-bottom: 0

	.umcPage.umcAppCenter .umcSize-TwoThirds
		@media screen and (max-width: 549px)
			width: 100%

	.umcThumbnailGallery
		position: relative
		line-height: 0

		.galleryLoadingOverlay
			position: absolute
			width: 100%
			height: 100%
			z-index: 1
			background-image: url(../../js/dijit/themes/umc/images/standbyAnimation.svg)
			background-repeat: no-repeat
			background-position: center center
			background-color: $app-detailspane-background-color
			opacity: 1

			&.loaded
				opacity: 0
				pointer-events: none

		.galleryOuterContainer
			position: relative

			.contentSliderWrapper
				display: inline-block
				white-space: nowrap
				overflow: hidden
				width: 100%
				padding: 5px 0 // some space for box-shadow of galleryThumbs

				.contentSlider
					display: inline-block
					transform: translate3d(0, 0, 0)
					transition-property: transform

					&.noTransition
						transition: none

					.galleryThumb
						display: inline-block
						vertical-align: middle
						transition-property: width, height
						box-shadow: 0 1px 6px rgba(1,0,0,0.117647), 0 1px 4px rgba(0,1,0,0.117647) // taken from univention-web/css/variables.styl

						&.galleryImgThumb
							background-size: contain
							background-position: center center
							background-repeat: no-repeat
							cursor: pointer

						&.brokenImg
							width: 150px
							box-shadow: inset 0px 0px 6px #5a5a5a
							background: url("appcenter/thumbnailError.svg") no-repeat, #e6e6e6
							background-position: center center
							background-size: 30% auto

						&.verticalAlignHelper
							margin: 0 !important
							height: 0

					.galleryVideoThumb
						position: relative

						.galleryVideo
							width: 100%
							height: 100%
							background-color: black

						.galleryVideoThumbnailWrapper
								width: 100%
								height: 100%

							.galleryVideoThumbnail
								width: 100%
								height: 100%
								background-size: cover
								background-position: center center
								background-repeat: no-repeat
								cursor: pointer

							.galleryVideoPlayButtonIcon
								width: 100%
								height: 100%
								background: url("appcenter/videoPlayButton.svg") no-repeat;
								background-size: auto 30%
								background-position: center center
								position: absolute
								top: 0

						&:after
							content: ''
							height: 100%
							display: inline-block
							vertical-align: middle

		.galleryNavButton
			cursor: pointer
			width: 40px
			opacity: 1
			transition-property: opacity, height
			position: absolute
			z-index: 1
			background-color: $app-detailspane-background-color
			padding: 5px 0
			box-sizing: content-box

			&.disabled
				opacity: 0
				cursor: default
				pointer-events: none
				height: 0

			.galleryNavButtonImage
				background-image: url("appcenter/carouselArrowRight.svg")
				background-size: contain
				background-repeat: no-repeat
				background-position: 0 50%
				height: 100%
				opacity: 0.4
				transition: opacity 0.3s

				&:hover
					opacity: 1

			&.rightGalleryNavButton
				margin-left: 5px
				right: 0
				top: 0

			&.leftGalleryNavButton
				margin-right: 5px

				.galleryNavButtonImage
					transform: rotateY(180deg)
					-webkit-transform: rotateY(180deg)

		.scaleButton
			cursor: pointer
			width: 40px
			height: 40px
			background-image: url("appcenter/maximize.svg")
			background-size: 100% 100%
			position: absolute
			right: 0
			top: 0
			z-index: 1
			opacity: 0.4

			&.minimize
				background-image: url("appcenter/minimize.svg")

			&:hover
				opacity: 1

.umc .appInstallWizard__dryRunPage
	.umcPageMain
		min-height: 150px

.umc .appInstallWizard__detailsPage
	.dijitContentPane
		padding: 0

.umc .appInstallDialog__readmeTitle
	font-weight: bold

.umc .appInstallDialog__readme
	max-height: 350px
	overflow-y: auto
	overflow-x: hidden
	padding: 0

.umc .umcModule[id^=umc_modules_appcenter_],
.umc .umcModule[id^=umc_modules_apps_]
	overflow: hidden

	.umcModuleContent
		overflow: visible

.imageGallery
	--local-idx: 0
	padding-bottom: 30px // TODO this is the sum of the left and right padding of the bootstrap container

.imageGallery__aspectRatio
	width: 100%
	padding-bottom: calc(100% / (16 / 9))
	position: relative

.imageGallery__viewport
	border-radius: var(--border-radius-container)
	position: absolute
	top: 0
	left: 0
	width: 100%
	height: 100%
	overflow: hidden
	display: flex
	align-items: center
	background-color: var(--bgc-content-container)

.imageGallery__carousel
	width: 100%
	height: 100%
	display: flex
	position: relative
	left: calc(-100% * var(--local-idx))
	transition: left 250ms

.imageGallery__carouselItem
	flex: 1 0 auto
	width: 100%
	height: 100%
	display: flex
	align-items: center
	justify-content: center

	img
		max-width: 100%
		max-height: 100%

.imageGallery__navButton
	position: absolute
	--button-icon-highlighted-bgc: var(--color-black)

	&--left
		left: 1rem
	&--right
		right: 1rem

.imageGallery__carouselVideo__video
	width: 100%
	height: 100%
	background: var(--color-black)
		
.imageGallery__carouselVideo__playButton
	--button-size: 3rem
	--button-iconSize: 1.5rem
	position: absolute

.imageGallery__dotsWrapper
	width: 100%
	padding: 0.5rem 0
	display: flex
	justify-content: center

.imageGallery__dots
	position: relative
	display: flex
	grid-gap: 1rem

.imageGallery__dot
	width: 0.5rem
	height: @width
	border-radius: var(--border-radius-circles)
	background-color: rgba(255, 255, 255, 0.2)
	cursor: pointer

.imageGallery__dot--reticle
	position: absolute
	background-color: rgba(255, 255, 255, 1)
	left: calc(1.5rem * var(--local-idx))
	transition: left 250ms


