#!/usr/share/ucs-test/runner python3
## desc: Tests the Univention Admin Diary
## tags: [apptest]
## roles: [domaincontroller_master]
## exposure: dangerous
## packages:
##   - univention-admin-diary-backend


import univention.admindiary.backend
from univention.config_registry import handler_set
import univention.admindiary.client as cl 
from univention.admindiary.events import DiaryEvent

def main():
	with univention.admindiary.backend.get_client(version=1) as client:

		event = DiaryEvent.get('UDM_USERS_USER_CREATED')
		context={}
		entity="username"
		values = ["testuser1", "testuser2", "testuser3", "testuser4"]
		limit = len(values)
		 
		for i in range(limit):
			context[entity] = values[i]
			cl.write_event(event, context)

if __name__ == '__main__':
	main()
